[=MsgDisplay("Generating "+trim(getvar("Filename"))+" ...")]
<?xml version="1.0" encoding="UTF-8" ?>
<VatList xmlns="http://www.minfin.fgov.be/VatList"  
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
xsi:schemaLocation="http://www.minfin.fgov.be/VatList http://www.minfin.fgov.be/VatList/VatList.xsd"
RecipientId="VAT-ADMIN"  
SenderId="[=trim(substr(tvatrim(MemNoTva),4))]"
ControlRef="[=trim(substr(tvatrim(MemNoTva),4))]0001"
MandataireId="xxxx"  
SenderDate="[=dtocf(UserDate(),"yyyy-mm-dd")]"  
[etc if .t.]
Test="1"
[etc endif]
VersionTech="1.2">

<CompanyInfo>
<VATNum>[=substr(TvaTrim(MemNoTva),4)]</VATNum>
<Name>[=trim(MemName1)]</Name>
<Street>[=trim(MemName2)]</Street>
<CityAndZipCode>[=trim(MemName3)]</CityAndZipCode>
<Country>[=left(MemNoTva,2)]</Country>
</CompanyInfo>

<Period>[=getvar("year")]</Period>

[=setvar("LSTTVA.TurnOver",0)]
[=setvar("LSTTVA.Amount",0)]

[etc if .f.]
<Farmer>1</Farmer>
[etc endif]

[etc loop clients DbfScan({oPar()},1,NIL,NIL,\
  "ParVatList('V','"\
    +DbcText("VATLIST.DBC",getvar("Type"),3)\
    +"').and.getvar('MontB')>="\
    +ltrim(getvar('MontMin')\
  ),xlEval)]
[etc do DlgPlus("LSTTVA.Turnover",getvar("MontB"))]
[etc do DlgPlus("LSTTVA.Amount",getvar("MontT"))]
<ClientList SequenceNum="1">
<CompanyInfo>
<VATNum>[=substr(tvatrim(PAR->NoTva),4)]</VATNum>
<Country>[=left(PAR->NoTva,2)]</Country>
</CompanyInfo>
<Amount>[=ntrim(getvar("MontT")*100)]</Amount>
<TurnOver>[=ntrim(getvar("MontB")*100)]</TurnOver>
</ClientList>
[etc endloop clients]

<TurnOver>[=ntrim(getvar("LSTTVA.TurnOver")*100)]</TurnOver>
<Amount>[=ntrim(getvar("LSTTVA.Amount")*100)]</Amount>

</VatList>
